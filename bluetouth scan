import bluetooth
nearby_devices = bluetooth.discover_devices(lookup_names=True)
print("found %d devices" % len(nearby_devices))
for addr, name in nearby_devices:
     print(" %s - %s" % (addr, name))
     with open("devices1.txt", "w") as f:
    for addr in nearby_devices:
        f.write(str(addr))
        
f.close()

#or
import time
import bluetooth
if __name__=="__main__":
    while True:        
        results = bluetooth.discover_devices(duration=20, lookup_names = True)
        if (results!=None):
            for addr, name in results:
                     print(" %s - %s" % (addr, name))
            #endfor
        
        #endif
    time.sleep(60)
  with open("devices1.txt", "w") as f:
    for addr in nearby_devices:
        f.write(str(addr))
        
f.close()
